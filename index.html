<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Lean Obsidian Studio</title>
  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link href="https://fonts.googleapis.com/css2?family=JetBrains+Mono:wght@400;500;600;700&display=swap" rel="stylesheet">
  <link rel="stylesheet" href="style.css">
</head>
<body>

  <!-- Header -->
  <header class="header">
    <h1 class="header__title">Lean Obsidian Studio</h1>
    <p class="header__subtitle">Your tailor-made Obsidian setup &ndash; no coding, no friction.</p>
  </header>

  <!-- Tagline -->
  <section class="tagline">
    <p>Create dynamic views that adapt to your workflow.</p>
  </section>

  <!-- Main Content -->
  <main class="main">

    <!-- Template Cards -->
    <section class="templates" id="templatesSection">
      <h2 class="templates__heading">Start with an Idea...</h2>
      <div class="templates__grid">

        <button class="card" data-template="progress">
          <h3 class="card__title">Project Progress Bar</h3>
          <p class="card__desc">Visual progress bars for tasks or projects.</p>
        </button>

        <button class="card" data-template="ratings">
          <h3 class="card__title">Star Ratings Table</h3>
          <p class="card__desc">Elegant star ratings using the icon function.</p>
        </button>

        <button class="card" data-template="map">
          <h3 class="card__title">Travel Trip Map</h3>
          <p class="card__desc">Plot your adventures on an interactive map.</p>
        </button>

        <button class="card" data-template="birthday">
          <h3 class="card__title">Birthday Tracker</h3>
          <p class="card__desc">Never miss a birthday with automated calculations.</p>
        </button>

        <button class="card" data-template="cleaner">
          <h3 class="card__title">Vault Cleaner</h3>
          <p class="card__desc">Identify untagged or messy notes in your vault.</p>
        </button>

        <button class="card" data-template="summary">
          <h3 class="card__title">Content Summary</h3>
          <p class="card__desc">Aggregate custom summary functions.</p>
        </button>

      </div>
    </section>

    <!-- Blueprint Section -->
    <section class="blueprint">
      <div class="blueprint__input">
        <div class="blueprint__title-row">
          <h3 class="blueprint__title" id="blueprintTitle">Base Blueprint</h3>
          <div class="blueprint__title-actions">
            <button class="blueprint__template-btn" id="templateBtn">
              <svg width="14" height="14" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><rect x="3" y="3" width="18" height="18" rx="2" ry="2"/><line x1="3" y1="9" x2="21" y2="9"/><line x1="9" y1="21" x2="9" y2="9"/></svg>
              Structured Prompt
            </button>
            <span class="blueprint__info-icon" title="Use this prompt structure for best results.">
              <svg width="14" height="14" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><circle cx="12" cy="12" r="10"/><line x1="12" y1="16" x2="12" y2="12"/><line x1="12" y1="8" x2="12.01" y2="8"/></svg>
            </span>
            <button class="blueprint__reset" id="resetBtn" style="display:none;">
              <svg width="14" height="14" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><polyline points="1 4 1 10 7 10"/><path d="M3.51 15a9 9 0 1 0 2.13-9.36L1 10"/></svg>
              Reset
            </button>
          </div>
        </div>
        <textarea
          id="queryInput"
          class="blueprint__textarea"
          placeholder="Describe the query you want."
        ></textarea>
        <button id="generateBtn" class="blueprint__btn">
          <svg class="blueprint__btn-icon" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M14 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V8z"/><polyline points="14 2 14 8 20 8"/><line x1="16" y1="13" x2="8" y2="13"/><line x1="16" y1="17" x2="8" y2="17"/><polyline points="10 9 9 9 8 9"/></svg>
          <span id="generateLabel">Generate</span>
        </button>
      </div>

      <div class="blueprint__output" id="outputPanel">
        <div class="blueprint__placeholder" id="outputPlaceholder">
          <p>Your generated Base query will appear here.</p>
        </div>
        <div class="blueprint__help" id="templateHelp" style="display:none;">
          <h3 class="blueprint__help-title">How to use the prompt template</h3>
          <div class="blueprint__help-body">
            <h4>FOLDER <span class="blueprint__help-opt">(optional)</span></h4>
            <ul>
              <li>Enter a folder path only if you want to limit the results to a specific area of your vault.</li>
              <li>If you leave the folder empty, the query will search the whole vault.</li>
            </ul>
            <h4>TAGS <span class="blueprint__help-opt">(optional)</span></h4>
            <ul>
              <li>You can include tags, exclude tags, or use both.</li>
              <li>&ldquo;Tag matching&rdquo; controls how to handle multiple included tags:
                <ul>
                  <li><strong>any</strong>: a note must have at least one of the tags</li>
                  <li><strong>all</strong>: a note must have all the tags</li>
                </ul>
              </li>
            </ul>
            <h4>PROPERTY FILTERS <span class="blueprint__help-opt">(optional)</span></h4>
            <ul>
              <li>Use them only if your notes have frontmatter properties you want to filter by.</li>
              <li>Choose one condition per property.</li>
              <li>Some conditions require a value (e.g., &ldquo;equals&rdquo;, &ldquo;contains&rdquo;, &ldquo;greater&rdquo;).</li>
              <li>Some conditions do not need a value (e.g., &ldquo;empty&rdquo;, &ldquo;not empty&rdquo;).</li>
            </ul>
            <h4>VIEWS</h4>
            <ul>
              <li>Choose exactly one view type: Table, List, Cards, or Map.</li>
              <li>The view name is only a label for you and helps identify the view later.</li>
              <li>Changing the view type affects how fields are displayed &mdash; this is not a filter.</li>
            </ul>
            <h4>FIELDS</h4>
            <ul>
              <li>List only the fields you want to see in the result.</li>
              <li>Fields can be file-based (like &ldquo;file name&rdquo;) or frontmatter properties.</li>
              <li>Display names let you rename fields in the view without changing your notes.</li>
            </ul>
            <h4>FORMULAS <span class="blueprint__help-opt">(optional)</span></h4>
            <ul>
              <li>Use them to create calculated values that do not exist in your notes.</li>
              <li>Describe what should be calculated in plain language.</li>
            </ul>
            <h4>SUMMARIES <span class="blueprint__help-opt">(optional)</span></h4>
            <ul>
              <li>They calculate aggregate results for a number property.</li>
              <li>Choose one calculation type per property.</li>
            </ul>
            <h4>ORDERING <span class="blueprint__help-opt">(optional)</span></h4>
            <ul>
              <li>Sorting controls the order of results.</li>
              <li>Grouping clusters results by a property.</li>
              <li>Limiting restricts how many items are shown.</li>
            </ul>
            <h4>GENERAL</h4>
            <ul>
              <li>You do not need to fill in every section &mdash; delete what you don&rsquo;t need.</li>
            </ul>
          </div>
        </div>
        <div class="blueprint__result" id="outputResult" style="display:none;">
          <div class="blueprint__result-header">
            <h3 class="blueprint__result-label">Base Generated</h3>
            <div class="blueprint__actions">
              <button class="blueprint__action-btn" id="copyBtn" title="Copy to clipboard">
                <svg width="14" height="14" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><rect x="9" y="9" width="13" height="13" rx="2" ry="2"/><path d="M5 15H4a2 2 0 0 1-2-2V4a2 2 0 0 1 2-2h9a2 2 0 0 1 2 2v1"/></svg>
                <span id="copyLabel">Copy</span>
              </button>
              <button class="blueprint__action-btn" id="downloadBtn" title="Download .base file">
                <svg width="14" height="14" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4"/><polyline points="7 10 12 15 17 10"/><line x1="12" y1="15" x2="12" y2="3"/></svg>
                Download .base
              </button>
            </div>
          </div>
          <pre class="blueprint__code"><code id="outputCode"></code></pre>
        </div>
      </div>
    </section>

  </main>

  <!-- Footer -->
  <footer class="footer">
    <span class="footer__version">Version 0.2.2</span>
    <span class="footer__copy">&copy; Lean Obsidian Studio.</span>
    <a href="https://forms.cloud.microsoft/r/7h7c05F7PU" target="_blank" rel="noopener noreferrer" class="footer__feedback" id="feedbackBtn">Feedback</a>
  </footer>

  <script src="templates.js"></script>
  <script src="app.js"></script>
</body>
</html>
